<!DOCTYPE html>
{% load static %}
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <link rel="icon" href="{% static 'images/bank.png' %}" type="image/x-icon">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
    </head>
    <body>
        <h1>Transaction Report</h1>
        <style>
          .form-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            max-width: 800px;
          }
        
          .form-field {
            flex: 1 1 45%; /* each field takes about 45% of row */
            min-width: 200px;
          }
        
          .filter-button {
            margin-top: 1rem;
          }
        </style>
        <form method="get" action="/filter/">
          <div class="form-container">
            <div class="form-field">
              <label>From date:</label>
              <input type="date" name="from_date" class="form-control"value="{{ request.GET.from_date }}">
            </div>
            <div class="form-field">
              <label>To date:</label>
              <input type="date" name="to_date" class="form-control"value="{{ request.GET.to_date }}">
            </div>
            <div class="form-field">
              <label>Amount:</label>
              <input type="text" name="amount" class="form-control"value="{{ request.GET.amount }}">
            </div>
            <div class="form-field">
              <label>From account no:</label>
              <input type="text" name="from_account_no" class="form-control"value="{{ request.GET.from_account_no }}">
            </div>
            <div class="form-field">
              <label>Transaction type:</label>
              <select name="transaction_type" class="form-control">
                <option value="" {% if not request.GET.transaction_type %}selected{% endif %}>All</option>
                <option value="debit" {% if request.GET.transaction_type == "debit" %}selected{% endif %}>Debit</option>
                <option value="credit"{% if request.GET.transaction_type == "credit" %}selected{% endif %}>Credit</option>
              </select>
            </div>
          </div>
        
          <div class="filter-button d-flex gap-2">
            <button type="submit" class="btn btn-primary">Filter</button>
            <a href="/filter/" class="btn btn-secondary">Reset Filters</a>
          </div>
        </form>
        
       
        
          <!-- Filtered results -->
          <table class="table-auto w-full border-collapse border border-gray-400">
            <thead>
              <tr class="bg-gray-200">
                <th class="border px-4 py-2">Transaction Date</th>
                <th class="border px-4 py-2">From</th>
                <th class="border px-4 py-2">To</th>
                <th class="border px-4 py-2">Amount</th>
                <th class="border px-4 py-2">Type</th>
              </tr>
            </thead>
            <tbody>
              {% for transaction in transactions %}
                <tr class="hover:bg-gray-100">
                  <td class="border px-4 py-2">{{ transaction.date }}</td>
                  <td class="border px-4 py-2">{{ transaction.from_account_no }}</td>
                  <td class="border px-4 py-2">{{ transaction.to_account_no }}</td>
                  <td class="border px-4 py-2">{{ transaction.amount }}</td>
                  <td class="border px-4 py-2">{{ transaction.transaction_type }}</td>
                </tr>
              {% empty %}
                <tr>
                  <td colspan="5" class="text-center py-4">No transactions found.</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        <script src="" async defer></script>
    </body>
</html>